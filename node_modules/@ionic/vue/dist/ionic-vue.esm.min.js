import{addIcons}from"ionicons";import{ICON_PATHS}from"ionicons/icons";import{defineCustomElements}from"@ionic/core/loader";import{LIFECYCLE_DID_ENTER,LIFECYCLE_DID_LEAVE,LIFECYCLE_WILL_ENTER,LIFECYCLE_WILL_LEAVE,LIFECYCLE_WILL_UNLOAD}from"@ionic/core";import Vue from"vue";import VueRouter from"vue-router";var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function __extends(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function __awaiter(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function l(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,l)}u((r=r.apply(t,e||[])).next())})}function __generator(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var OverlayBaseController=function(){function t(t){this.ctrl=t}return t.prototype.create=function(t){return proxyMethod(this.ctrl,"create",t)},t.prototype.dismiss=function(t,e,n){return proxyMethod(this.ctrl,"dismiss",t,e,n)},t.prototype.getTop=function(){return proxyMethod(this.ctrl,"getTop")},t}();function proxyMethod(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=ensureElementInBody(t);return o.componentOnReady().then(function(){return o[e].apply(o,n)})}function ensureElementInBody(t){var e=document.querySelector(t);return e||(e=document.createElement(t),document.body.appendChild(e)),e}var CTRL="ion-action-sheet-controller",ActionSheetController=function(t){function e(){return t.call(this,CTRL)||this}return __extends(e,t),e}(OverlayBaseController),CTRL$1="ion-alert-controller",AlertController=function(t){function e(){return t.call(this,CTRL$1)||this}return __extends(e,t),e}(OverlayBaseController),LoadingController=function(t){function e(){return t.call(this,"ion-loading-controller")||this}return __extends(e,t),e}(OverlayBaseController),CTRL$2="ion-menu-controller",MenuController=function(){function t(){}return t.prototype.open=function(t){return proxyMethod(CTRL$2,"open",t)},t.prototype.close=function(t){return proxyMethod(CTRL$2,"close",t)},t.prototype.toggle=function(t){return proxyMethod(CTRL$2,"toggle",t)},t.prototype.enable=function(t,e){return proxyMethod(CTRL$2,"enable",t,e)},t.prototype.swipeEnable=function(t,e){return proxyMethod(CTRL$2,"swipeEnable",t,e)},t.prototype.isOpen=function(t){return proxyMethod(CTRL$2,"isOpen",t)},t.prototype.isEnabled=function(t){return proxyMethod(CTRL$2,"isEnabled",t)},t.prototype.get=function(t){return proxyMethod(CTRL$2,"get",t)},t.prototype.getOpen=function(){return proxyMethod(CTRL$2,"getOpen")},t.prototype.getMenus=function(){return proxyMethod(CTRL$2,"getMenus")},t}(),CTRL$3="ion-modal-controller",ModalController=function(t){function e(e){var n=t.call(this,CTRL$3)||this;return n.delegate=e,n}return __extends(e,t),e.prototype.create=function(e){return t.prototype.create.call(this,__assign({},e,{delegate:this.delegate}))},e}(OverlayBaseController),CTRL$4="ion-popover-controller",PopoverController=function(t){function e(e){var n=t.call(this,CTRL$4)||this;return n.delegate=e,n}return __extends(e,t),e.prototype.create=function(e){return t.prototype.create.call(this,__assign({},e,{delegate:this.delegate}))},e}(OverlayBaseController),ToastController=function(t){function e(){return t.call(this,"ion-toast-controller")||this}return __extends(e,t),e}(OverlayBaseController);function appInitialize(t){var e=window;(e.Ionic=e.Ionic||{}).config=t,defineCustomElements(window),addIcons(ICON_PATHS)}function createVueComponent(t,e){return Promise.resolve("function"==typeof e&&void 0===e.cid?e().then(function(e){return t.extend(isESModule(e)?e.default:e)}):t.extend(e))}var VueDelegate=function(){function t(t){this.vue=t}return t.prototype.attachViewToDom=function(t,e,n,r){return isElement(e)?(addClasses(e,r),t.appendChild(e),bindLifecycleEvents(e,t),Promise.resolve(e)):createVueComponent(this.vue,e).then(function(e){var o=new e(n);return o.$mount(),addClasses(o.$el,r),t.appendChild(o.$el),o.$el})},t.prototype.removeViewFromDom=function(t,e){return e.__vue__&&e.__vue__.$destroy(),Promise.resolve()},t}(),LIFECYCLES=[LIFECYCLE_WILL_ENTER,LIFECYCLE_DID_ENTER,LIFECYCLE_WILL_LEAVE,LIFECYCLE_DID_LEAVE,LIFECYCLE_WILL_UNLOAD];function bindLifecycleEvents(t,e){LIFECYCLES.forEach(function(n){e.addEventListener(n,function(e){"function"==typeof t[n]&&t[n](e.detail)})})}var hasSymbol="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function isESModule(t){return t.__esModule||hasSymbol&&"Module"===t[Symbol.toStringTag]}function isElement(t){return"undefined"!=typeof Element&&t instanceof Element}function addClasses(t,e){void 0===e&&(e=[]);for(var n=0,r=e;n<r.length;n++){var o=r[n];t.classList.add(o)}}var tabBars=[],cachedTabs=[],IonTabs={name:"IonTabs",functional:!0,render:function(t,e){var n=e.parent,r=e.data,o=e.slots,a=e.listeners,i=[],l=[],u=n.$route,c="";if(!n.$router)throw new Error("IonTabs requires an instance of either VueRouter or IonicVueRouter");for(var s=0;s<o().default.length;s++){var f=o().default[s];if(f.tag&&null!==f.tag.match(/ion-tab$/)){var d=matchRouteToTab(f,u),p=cachedTabs[s];d?(p||(cachedTabs[s]=f),c=d,f.data.attrs.active=!0,i.push(f)):i.push(p?f:t())}else i.push(f),l[s]=f}return Vue.nextTick(function(){for(var t=0;t<l.length;t++){var e=l[t];if(e&&e.elm&&"ION-TAB"===e.elm.nodeName){var n=e.elm,r=matchRouteToTab({data:{attrs:{tab:n.getAttribute("tab"),routes:n.getAttribute("route")}}},u);if(n.active=!!r,r)for(var o=0,a=tabBars;o<a.length;o++){a[o].elm.selectedTab=r}cachedTabs[t]=e}}tabBars.length=0}),t("div",__assign({},r,{style:hostStyles}),[parseSlot(o().top,c,a),t("div",{class:"tabs-inner",style:tabsInner},i),parseSlot(o().bottom,c,a)])}};function parseSlot(t,e,n){var r=[];if(!t)return r;for(var o=0,a=t;o<a.length;o++){var i=a[o];r.push(i.tag&&i.tag.match(/ion-tab-bar$/)?parseTabBar(i,e,n):i)}return r}function parseTabBar(t,e,n){var r=n.IonTabsWillChange,o=n.IonTabsDidChange;if(t.data?t.data.attrs?t.data.attrs["selected-tab"]=e:t.data.attrs={"selected-tab":e}:t.data={attrs:{"selected-tab":e}},t.children)for(var a=function(e){if(e.tag&&"ion-tab-button"===e.tag){var n=function(n){var a=e.elm.tab||"/",i=hasDataAttr(e,"to")?e.data.attrs.to:{path:a};n.preventDefault(),Array.isArray(r)?r.map(function(t){return t(i)}):r&&r(i),t.context.$router.push(i,function(){Array.isArray(o)?o.map(function(t){return t(i)}):o&&o(i)})};e.data&&e.data.on&&e.data.on.click?e.data.on.click&&(Array.isArray(e.data.on.click)?e.data.on.click.push(n):e.data.on.click=[e.data.on.click,n]):Object.assign(e.data,{on:{click:n}})}},i=0,l=t.children;i<l.length;i++){a(l[i])}return tabBars.push(t),t}function hasDataAttr(t,e){return t.data&&t.data.attrs&&t.data.attrs[e]}function matchRouteToTab(t,e){if(!t.data||!t.data.attrs||!t.data.attrs.tab)throw new Error("The tab attribute is required for an ion-tab element");var n=t.data.attrs.tab;if(t.data.attrs.routes)for(var r=0,o=Array.isArray(t.data.attrs.routes)?t.data.attrs.routes:t.data.attrs.routes.replace(" ","").split(",");r<o.length;r++){var a=o[r];if(e.name===a)return n}else if(e.path.indexOf(n)>-1)return n;return""}var Vue$1,hostStyles={display:"flex",position:"absolute",top:0,left:0,right:0,bottom:0,flexDirection:"column",width:"100%",height:"100%",contain:"layout size style"},tabsInner={position:"relative",flex:1,contain:"layout size style"};function createApi(t){var e={},n=new VueDelegate(t);return{get actionSheetController(){return e.actionSheetController||(e.actionSheetController=new ActionSheetController),e.actionSheetController},get alertController(){return e.alertController||(e.alertController=new AlertController),e.alertController},get loadingController(){return e.loadingController||(e.loadingController=new LoadingController),e.loadingController},get menuController(){return e.menuController||(e.menuController=new MenuController),e.menuController},get modalController(){return e.modalController||(e.modalController=new ModalController(n)),e.modalController},get popoverController(){return e.popoverController||(e.popoverController=new PopoverController(n)),e.popoverController},get toastController(){return e.toastController||(e.toastController=new ToastController),e.toastController}}}var enteringEl,install=function(t,e){if(Vue$1&&t===Vue$1)"production"!==process.env.NODE_ENV&&console.error("[Ionic] already installed. Vue.use(Ionic) should be called only once.");else{(Vue$1=t).config.ignoredElements.push(/^ion-/),Vue$1.component("IonTabs",IonTabs),appInitialize(e);var n=createApi(Vue$1);Object.defineProperty(Vue$1.prototype,"$ionic",{get:function(){return n}})}},IonVueRouter={name:"IonVueRouter",functional:!0,props:{name:{default:"default",type:String},animated:{default:!0,type:Boolean}},render:function(t,e){var n=e.parent,r=e.props,o=e.data,a=e.children;if(!n.$router)throw new Error("IonTabs requires an instance of either VueRouter or IonicVueRouter");return t("ion-router-outlet",__assign({},o,{ref:"ionRouterOutlet",on:{click:function(t){return catchIonicGoBack(n,t)}}}),[t("transition",{props:{css:!1,mode:"in-out"},on:{leave:function(t,e){leave(n,r,t,e)},beforeEnter:beforeEnter,enter:enter,afterEnter:afterEnter,beforeLeave:beforeLeave,afterLeave:afterLeave,enterCancelled:enterCancelled,leaveCancelled:leaveCancelled}},[t("router-view",{props:{name:r.name}},a)])])}};function catchIonicGoBack(t,e){if(e.stopImmediatePropagation(),e.target){var n=e.target.closest("ion-back-button");if(n){var r,o=t.$router;if(o.directionOverride=-1,o.canGoBack())return e.preventDefault(),void o.back();void 0!==(r=n.defaultHref)&&(e.preventDefault(),o.push(r))}}}function leave(t,e,n,r){var o=transition(t,e,n);o?t.$router.transition=new Promise(function(t){o.then(function(){t(),r()}).catch(console.error)}):r()}function transition(t,e,n){var r=t.$refs.ionRouterOutlet;if(void 0!==r.componentOnReady&&enteringEl&&enteringEl!==n)return enteringEl.classList.add("ion-page","ion-page-invisible"),r.componentOnReady().then(function(r){return r.commit(enteringEl,n,{deepWait:!0,duration:e.animated?void 0:0,direction:1===t.$router.direction?"forward":"back",showGoBack:t.$router.canGoBack()})}).catch(console.error)}function beforeEnter(t){enteringEl=t}function enter(t,e){e()}function afterEnter(t){}function afterLeave(t){}function beforeLeave(t){}function enterCancelled(t){}function leaveCancelled(t){}var Router=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.direction=e.direction||1,n.directionOverride=null,n.viewCount=e.viewCount||0,n.prevRouteStack=[],n.extendHistory(),n.extendTransitionConfirmation(),document.addEventListener("ionBackButton",function(t){t.detail.register(0,function(){return n.back()})}),n}return __extends(e,t),e.prototype.extendTransitionConfirmation=function(){var t=this;this.history._confirmTransition=this.history.confirmTransition,this.history.confirmTransition=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return __awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return void 0===this.transition?[3,2]:[4,this.transition];case 1:n.sent(),n.label=2;case 2:return(t=this.history)._confirmTransition.apply(t,e),[2]}})})}},e.prototype.extendHistory=function(){var t=this;this.history._updateRoute=this.history.updateRoute,this.history.updateRoute=function(e){t.direction=t.guessDirection(e),t.directionOverride&&(t.direction=t.directionOverride),t.viewCount+=t.direction,t.history._updateRoute(e),t.directionOverride=null}},e.prototype.canGoBack=function(){return this.viewCount>1&&this.currentRoute.fullPath.length>1},e.prototype.guessDirection=function(t){if(0!==this.prevRouteStack.length){var e=this.prevRouteStack[this.prevRouteStack.length-1];if(e.fullPath===t.fullPath)return 1===e.fullPath.length?this.prevRouteStack=[]:this.prevRouteStack.pop(),-1}return this.history.current.fullPath!==t.fullPath&&this.prevRouteStack.push(this.history.current),1},e}(VueRouter);Router.install=function(t){Router.installed||(Router.installed=!0,VueRouter.install(t),t.component("IonVueRouter",IonVueRouter))};var index={install:install,version:"__VERSION__"};export default index;export{Router as IonicVueRouter};
